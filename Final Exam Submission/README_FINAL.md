## Project Overview
This project aims to analyze multiple sclerosis (MS) patient data to investigate the relationships between demographic factors, walking speed, and healthcare costs. The analysis is divided into four parts:
1. **Data Preparation** - Clean the raw data and create necessary files for further analysis.
2. **Data Analysis** - Perform initial data processing, insurance categorization, and cost calculations.
3. **Statistical Analysis** - Conduct statistical tests on walking speed and cost to uncover significant trends.
4. **Data Visualization** - Generate insightful visualizations to represent findings.


## Files and Directories
- **generate_dirty_data.py**: Script to generate initial raw data (`ms_data_dirty.csv`).
- **prepare.sh**: Shell script to clean the raw data, create the cleaned file `ms_data.csv`, and generate the `insurance.lst` file.
- **analyze_visits.py**: Python script to structure and process the cleaned data, assign insurance categories, calculate visit costs, and compute summary statistics.
- **stats_analysis.py**: Python script to conduct statistical analyses on walking speed and costs, including effect size calculations.
- **visualize.ipynb**: Jupyter notebook for generating various visualizations to represent findings.
- **ms_data_dirty.csv**: Initial raw data file (generated by `generate_dirty_data.py`).
- **ms_data.csv**: Cleaned data file created by `prepare.sh`.
- **insurance.lst**: List of insurance types created by `prepare.sh`.
- **exam2.md**: Original exam instructions and project requirements.
- **README.md**: This documentation file summarizing each step and detailing the contents and functions of each script.

## Dataset Summary
**Total Rows**: 15,389  
**Total Columns**: 7  

### Column Details
| Column Name       | Non-Null Count | Unique Values | Description                       |
|-------------------|----------------|---------------|-----------------------------------|
| `patient_id`      | 15,389         | 1,000         | Unique identifier for patients    |
| `visit_date`      | 15,389         | 1,461         | Date of each recorded visit       |
| `age`             | 15,389         | 5,748         | Patient's age                     |
| `education_level` | 15,389         | 4             | Education level of the patient    |
| `walking_speed`   | 15,389         | 403           | Recorded walking speed            |
| `insurance_type`  | 15,389         | 3             | Insurance plan type               |
| `visit_cost`      | 15,389         | 15,389        | Calculated cost per visit         |

## 1. Data Preparation (`prepare.sh`)
**Script**: `prepare.sh`

1. **Run `generate_dirty_data.py`** to generate the initial raw data file:
   ```bash
   python3 generate_dirty_data.py
   ```
2. **Run `prepare.sh`** to:
   - Clean `ms_data_dirty.csv` by removing comments, empty lines, and extra commas.
   - Extract essential columns: `patient_id`, `visit_date`, `age`, `education_level`, `walking_speed`.
   - Save the cleaned data as `ms_data.csv`.
   - Create `insurance.lst` containing the insurance types: `Value`, `HMO`, and `PPO`.

   ```bash
   chmod +x prepare.sh
   ./prepare.sh
   ```

3. **Output**: 
   - `ms_data.csv`: Cleaned data file.
   - `insurance.lst`: File listing available insurance types.

## 2. Data Analysis (`analyze_visits.py`)
**Script**: `analyze_visits.py`

1. **Run `analyze_visits.py`** to:
   - Load `ms_data.csv` and `insurance.lst`.
   - Assign each patient a consistent insurance type across all visits.
   - Calculate visit costs based on insurance type with random variation.
   - Generate summary statistics:
     - Mean walking speed by `education_level`.
     - Mean costs by `insurance_type`.
     - Correlation of age with walking speed.

   ```bash
   python3 analyze_visits.py
   ```

2. **Output**: Summary statistics printed to the console.

## 3. Statistical Analysis (`stats_analysis.py`)
**Script**: `stats_analysis.py`

1. **Run `stats_analysis.py`** to conduct statistical analysis:
   - **Walking Speed Analysis**:
     - Perform multiple regression with `education_level` and `age` as predictors of `walking_speed`.
     - Account for repeated measures with a mixed-effects model.
     - Test the interaction between `education_level` and `age`.
   - **Cost Analysis**:
     - Generate box plots to visualize the effect of `insurance_type` on `visit_cost`.
     - Calculate effect sizes (Cohen’s d) for pairwise comparisons between insurance types.
   - **Advanced Analysis**:
     - Perform ANOVA to examine the interaction effect between `education_level` and `age` on `walking_speed`.
     - Control for `insurance_type` as a confounder in the final model.

   ```bash
   python3 stats_analysis.py
   ```

2. **Output**: Detailed statistical analysis results printed to the console, including regression summaries, effect sizes, and ANOVA results.

## 4. Data Visualization (`visualize.ipynb`)
**Notebook**: `visualize.ipynb`

1. Open `visualize.ipynb` in Jupyter Notebook to generate visualizations:
   - **Walking Speed Analysis**:
     - **Scatter Plot**: `age` vs `walking_speed` with a regression line to examine the relationship between age and walking speed.
     - **Box Plot**: `walking_speed` by `education_level` to observe differences in walking speed across education levels.
     - **Line Plot**: Interaction between `education_level` and `age` for walking speed.
   - **Cost Analysis**:
     - **Bar Plot**: Mean `visit_cost` by `insurance_type` to display average costs for each insurance type.
     - **Box Plot**: Distribution of `visit_cost` across insurance types.
   - **Combined Visualizations**:
     - **Pair Plot**: Key variables for an overview of relationships among `age`, `walking_speed`, and `visit_cost`.
     - **Facet Plot**: `age` vs `walking_speed` by `education_level` and `insurance_type`.
     - **Time Trends**: Trends in `walking_speed` over time (if data supports).

   ```bash
   jupyter notebook visualize.ipynb
   ```

2. **Output**: Visualizations displayed in the notebook for analysis and interpretation.

## Summary of Key Findings
- **Walking Speed Analysis**:
  - **Regression Results**: `age` significantly influences `walking_speed`, with some variation based on `education_level`.
  - **Interaction Effects**: `education_level` modulates the impact of `age` on walking speed, as shown by ANOVA results.
- **Cost Analysis**:
  - **Cost Distributions**: Significant cost differences observed across insurance types, with mean costs varying as expected.
  - **Effect Sizes**: Cohen’s d effect sizes suggest substantial practical significance between certain insurance types.



